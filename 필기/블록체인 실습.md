## 블록체인 실습



설치URL

VirtualBox - <https://www.virtualbox.org/>

Vagrant - <https://www.vagrantup.com/>

VSCode - <https://code.visualstudio.com/>



###### crtl+` 하면 vs코드에서 터미널이 열림

###### cd c:\dev\eth_prac001 //경로설정

vagrant init 하면 VargrantFile이 생김

File-openFile에서 VargrantFile을 오픈하고 소스코드를 수정해줌

```
Vagrant.configure("2") do |config|
  config.vm.define "eth01" do |eth01|
    eth01.vm.box = "ubuntu/bionic64"
    eth01.vm.hostname = "eth01"
    eth01.vm.network "private_network", ip: "192.168.50.10"
    eth01.vm.provider "virtualbox" do |eth01v|
      eth01v.memory = 4096
    end
  end
  config.vm.define "eth02" do |eth02|
    eth02.vm.box = "ubuntu/bionic64"
    eth02.vm.hostname = "eth02"
    eth02.vm.network "private_network", ip: "192.168.50.11"
    eth02.vm.provider "virtualbox" do |eth02v|
      eth02v.memory = 4096
    end
  end
end
```

차례로 해야댐 같이 up하면 에러뜸

###### vagrant up eth01

터미널을 하나 더 생성해서

######  cd c:\dev\eth_prac001 //경로설정

###### vagrant up eth02

Remix - [http://remix.ethereum.org](http://remix.ethereum.org/)

Metamask - <https://metamask.io/>

Remix는 그냥 켜두고  Metamask는 하나 맹글어놔요

구문시드는 나만의 구문시드니까 이건 저장해놓습니다.

border action stay proud leisure mountain limit lottery orphan hold drum found



###### terminal (각각 실행)

```shell
vagrant ssh eth01

vagrant ssh eth02
```



###### Geth 설치(각각 실행)

```shell
sudo apt-get update
sudo apt-get install software-properties-common
sudo add-apt-repository -y ppa:ethereum/ethereum
sudo apt-get install ethereum
```

설치확인

`get version`

둘다 수행 01, 02

```
mkdir -p dev/eth_localdata

cd dev/eth_localdata

vi CustomGenesis.json(수정 i누르면 수정됌)(vi는 편집기)(첫번째 블록)
```

```json
{
  "config": {
    "chainId": 921,
    "homesteadBlock": 0,
    "eip155Block": 0,
    "eip158Block": 0
  },
  "alloc": {},
  "coinbase": "0x0000000000000000000000000000000000000000",
  "difficulty": "0x20",
  "extraData": "",
  "gasLimit": "0x47e7c5",
  "nonce": "0x0000000000000042",
  "mixhash": "0x0000000000000000000000000000000000000000000000000000000000000000",
  "parentHash": "0x0000000000000000000000000000000000000000000000000000000000000000",
  "timestamp": "0x00"
 }
```

esc

shift+;+qw하고 enter하면 저장됌 ㅎㅎ

이게뭐하는걸까??? 컴파일(문회형 뇌피셜)



```
geth --datadir /home/vagrant/dev/eth_localdata init /home/vagrant/dev/eth_localdata/CustomGenesis.json
```

실행일것(문회형 뇌피셜)

```shell
eth01
geth --networkid 921 --maxpeers 2 --datadir /home/vagrant/dev/eth_localdata --port 30303 console

eth02
geth --networkid 921 --maxpeers 2 --datadir /home/vagrant/dev/eth_localdata --port 30304 console
```



eth01

```
admin.nodeInfo.enode
```

나오는 코드임~

"enode://7d113105c333d3b0f00761aeda3a75fcb507dfb91d9ae227a72ad8447ece95970580b21982adf4fe98cf681288e7da7f7ab54579bc190a788887ca4608424a2a@127.0.0.1:30303"



eth02

나오는 코드를 (사이에 넣어야댐)

```shell
admin.addPeer("enode://7d113105c333d3b0f00761aeda3a75fcb507dfb91d9ae227a72ad8447ece95970580b21982adf4fe98cf681288e7da7f7ab54579bc190a788887ca4608424a2a@127.0.0.1:30303")
```



하면 eth01 - eth02랑 연결된듯? true나오면됌

```
true
```

```
admin.peers
```

아무것도 안나옴 네트워크 뭐때문에 안된다함 이유잘 모르겠음..



eth01, eth02

계정생성

```
personal.newAccount("test1234")
eth.accounts
```

트랜잭션 생성을 위한 이더 채굴

```
miner.start(1)
```

mining 종료

```
miner.stop()
```

채굴로 획득한 이더 잔액확인

```shell
eth.getBalance("0xfa750dabc2b431b6d07c36552961a9799afd6f29")(eth.accounts했을때 나오는거 쓰면됌)
```

트랜잭션 생성 (피어 연결이 안돼면 안됌)

```
eth.sendTransaction({from:"0xfa750dabc2b431b6d07c36552961a9799afd6f29", to:"eth02 account", value:web3.toWei(1, "ether")})
```

메타마스크 Ropsten 테스트넷

이더얻기

파우셋

request 1 ether from faucet누르면 이더가생김



과제

Remix

컴파일러를 solidity 5.2버젼 이상으루 만들면댐

SimpleStorage

```
pragma solidity 0.5.2;

contract SimpleStorage{
    
    uint256 value;
    
    contructor() public{ //생성자
        value = 0;
    }
    
    function setValue(uint256 _value) public{
        value = _value;
    }
    
    function getValue() public view returns (uint256){ //view 리턴형식인듯
        return value;
    }
}
```

저장하고

Deploy누르고

밑에 누르고 setValue에 셋하세요



###### Self-Check List(1/2)

Voter 구조체와 Proposal구조체의 쓰임에대해 설명할 수 있는가?

-각 구조체는 어떠한 정보를 담기위함인가?

구조체를 구성하는 각 변수

-구조체와 구조체의 리스트를 선언하고 사용할 수 있는가?



msg_sender는 무엇을 뜻하는가?

-msg_sender와 같은 특성을 갖는 변수를 무엇이라 지칭하는가?

조건문,반복문을 사용할 수 있는가?

생성자 및 함수의 선언을 이해할 수 있는가?



###### self-Check List(2/2)

생성자 및 함수의 동작을 설명할 수 있는가?

* constructor
* givRightToVote(address toVoter)
* delegate(address to)
* vote(unit8 toProposal)
* winningProposal() returns (unit8 _winningProposal)

givRightToVote 함수의 if문을 require문으로 변경할 수 있는가?

함수 내 storage 변수를 설명할 수 있는가?

Openzepplin SafeMath 라이브러리를 사용하여 코드를 변경할 수 있는가?

Ballot_sol은 모든 참가자에게 투표권을 부여할 수 있는 형태인가?

여러 투표에 투표할 수 잇는 컨트렉트로 확장할 수 있는 방법은 무엇인가?



이더리움 토큰 표준 ERC20에 대한 이해

스마트 컨트랙트 요구사항 명세

몰라 너무 길어



github.com/ldh1428a/ssafy